# vite-worktrees

Managing a team of AI agents, each developing on separate branches of your Vite project? `vite-worktrees` is a CLI tool designed to streamline this cutting-edge workflow. It empowers human supervisors to effortlessly preview the live changes made by each AI agent by running distinct Vite development server instances for every active agent branch, all accessible through a unified local server.

## What it does

`vite-worktrees` is built to enhance the AI-driven development lifecycle, particularly when multiple agents contribute to a Vite codebase:

- **Parallel AI Agent Workstreams:** Allows each AI agent to operate on its dedicated Git branch, making code modifications and iterations in isolation.
- **Live Previews & On-Demand Branch Creation:** Accessing a URL like `http://localhost:YOUR_PORT/branch-name/` in your browser is the primary way to interact with different branches: - If `branch-name` refers to an existing worktree (e.g., an active agent's branch or your main repository branch like `main`), you'll see its live Vite preview. Changes made by agents are reflected here. - If `branch-name` does not yet have an associated worktree, `vite-worktrees` will automatically create a new Git worktree and a corresponding new branch (derived from your repository's main branch) using this name. It then starts a dedicated Vite server for this new environment. This allows for the dynamic setup of new agent workstreams or feature branches simply by navigating to the desired URL path.
  This system provides immediate visual feedback for existing branches and an effortless setup for new ones, all without manual server management or complex Git commands.
- **Efficient Review & Integration:** Streamlines the process of monitoring, reviewing, and validating code generated by different AI agents. Quickly compare an agent's live preview against the main branch or other agent branches.
- **Isolated Agent Environments:** By leveraging Git worktrees under the hood, each agent's branch (and its corresponding Vite instance) operates in a sandboxed environment. These worktrees are physically located in a dedicated directory named `<your-repo-directory-name>-worktrees`, created as a sibling to your main repository folder. This structure prevents conflicts and ensures that an agent's experimental changes don't disrupt others or the main development line until ready for integration.
- **Facilitating AI-Human Collaboration:** Acts as a crucial bridge, enabling humans to effectively supervise and collaborate with AI agents by providing tangible, runnable previews of their ongoing development efforts.

## How to use it

There are a couple of ways to run this tool:

### Using `npx` (recommended for quick use)

You can run the tool directly using `npx` without needing to install it globally. This is the quickest way to try it out:

```bash
npx vite-worktrees [options]
```

### Global Installation (for frequent use)

If you plan to use the tool frequently, you can install it globally using npm:

```bash
npm install -g vite-worktrees
```

After installation, you can run it using the command:

```bash
vite-worktrees [options]
```

### Command-Line Options

- `--port <number>`: Specifies the port for the server. Defaults to `5173`.
  ```bash
  npx vite-worktrees --port 8080
  ```
- `--repo-path <path>`: Specifies the path to your Git repository. Defaults to the current directory.
  ```bash
  npx vite-worktrees --repo-path /path/to/your/project
  ```

### Accessing and Creating Branch Previews via URL

Once `vite-worktrees` is running, you interact with it primarily through your web browser. The URL structure is key:

- **To view an existing branch (e.g., `main` or an agent's branch `agent1-feature`):**
  Navigate to `http://localhost:PORT/branch-name/` (replace `PORT` with the port `vite-worktrees` is using, e.g., `5173`, and `branch-name` with the actual branch name).
  For example, to see the `main` branch: `http://localhost:5173/main/`
  To see agent `alpha`'s work on `new-ui-component`: `http://localhost:5173/alpha-new-ui-component/`

- **To create a new branch and its preview environment:**
  Simply navigate to the URL for the desired new branch name. For instance, if you want to start a new feature branch called `super-cool-feature` for an agent (or yourself):
  Go to `http://localhost:PORT/super-cool-feature/`
  `vite-worktrees` will automatically:
  1.  Create a new Git worktree for `super-cool-feature`.
  2.  Create a new Git branch named `super-cool-feature` (based off your repository's main branch).
  3.  Start a dedicated Vite development server for this new worktree.
      You will then see the live preview for this newly created branch.

This on-demand creation makes setting up new development streams for AI agents or features incredibly straightforward.

## Development

If you want to contribute to this project or use it as a base for your own CLI tool:

1.  **Clone the repository:**

    ```bash
    git clone <repository-url> # Replace <repository-url> with the actual URL
    cd vite-worktrees
    ```

2.  **Install dependencies:**

    ```bash
    npm install
    ```

3.  **Build the project:**
    The TypeScript code needs to be compiled into JavaScript.

    ```bash
    npm run build
    ```

4.  **Run locally:**
    To test your changes locally during development:
    ```bash
    npm start
    ```
    This typically executes the compiled script (e.g., via `node dist/index.js`) or uses a tool like `ts-node`. (The `npm start` script content from `package.json` would clarify this).

## License

MIT
